10 POKE &HFFD9,0 'SPEED UP CPU TO 1.78MHZ20 REM PROGRAM NAME-HANUKKAH DEMO30 REM -----------------------40 REM DIRECTIONS- PLEASE NOTE50 REM -----------------------60 REM PRESS THE "SPACE" BAR70 REM TO ADVANCE TO THE NEXT80 REM DAY OF CHANUKAH.90 REM ------------------------100 REM THIS PROGRAM WRITTEN BY110 REM RENARD A. DELLAFAVE120 REM COPYRIGHT (c) DEC. 1986130 REM -----------------------140 REM PRESENTED BY-150 REM AmeriCommunications, Inc.160 REM P.O. Box 891170 REM Raleigh, N.C. 27602180 REM CIS # 73007,2473190 REM -------------------------200 REM MAY BE DISTRIBUTED210 REM FOR ANY NOT-FOR-PROFIT220 REM PURPOSE.230 REM **********************240 REM ******** HAPPY *******250 REM ****** HOLIDAYS ******260 REM **********************270 REM SET UP PROPER PALETTE ON BREAK280 ON BRK GOTO 300290 GOTO 320300 PALETTE CMP:WIDTH 40:PRINT"******PROGRAM EXIT******":POKE 65496,0:END310 REM SELECT 320X192 16 COLOR SCREEN320 HSCREEN 2330 REM RESERVE BUFFERS FOR OBJECTS340 HBUFF 1,153 'FLAME STORAGE350 REM SET UP PALETTES FROM DATA LINE360 DATA 0,12,28,35,42,28,0,63,5,43,39,5,39,0,0,0370 FOR CA=0 TO 15:READ CS:PALETTE CA,CS:NEXT CA380 REM ********COLOR ASSIGNMENTS******390 REM * SLOT--COLOR-----USAGE------ *400 REM *  0      0     BACKGROUND    *410 REM *  1     12      MENORAH      *420 REM *  2     28    STAR CORNERS   *430 REM *  3     35    STAR CENTER    *440 REM *  4     42    DREIDEL BODY   *450 REM *  5     44    DREIDEL CORNERS*460 REM *  6      0   STAR BOUNDARIES *470 REM *  7     ??      TEXT COLOR   *480 REM *  8  5 OR 39  LEFT FLICKER   *490 REM *  9     43     FLAME BOTTOM  *500 REM * 10  39 OR 5  RIGHT FLICKER  *510 REM * 11     5       FLAME BODY   *520 REM * 12    39      FLAME CENTER  *530 REM * 13-15  0       NOT USED     *540 REM *******************************550 REM DRAW AND GET FLAME IMAGE560 DATA 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0570 DATA 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0580 DATA 0,0,0,0,0,0,0,0,6,6,0,0,0,0,0,0590 DATA 0,0,0,0,0,0,0,6,6,6,6,0,0,0,0,0600 DATA 0,0,0,0,0,0,6,6,3,6,6,0,0,0,0,0610 DATA 0,0,0,0,6,6,3,3,3,5,5,0,0,0,0,0620 DATA 0,0,0,6,6,6,6,3,7,5,6,6,0,0,0,0630 DATA 0,0,0,6,6,6,3,7,7,5,6,6,0,0,0,0640 DATA 0,0,0,6,6,6,3,7,7,7,6,6,0,0,0,0650 DATA 0,0,6,6,6,7,7,7,7,7,6,6,0,0,0,0660 DATA 0,0,6,6,6,7,7,7,7,7,6,6,0,0,0,0670 DATA 0,0,6,6,6,7,7,7,7,7,7,6,0,0,0,0680 DATA 0,0,0,6,6,7,7,4,7,7,7,6,0,0,0,0690 DATA 0,0,0,6,7,7,7,4,4,7,6,6,0,0,0,0700 DATA 0,0,0,6,7,7,7,4,4,7,6,0,0,0,0,0710 DATA 0,0,0,6,6,7,7,4,4,7,6,0,0,0,0,0720 DATA 0,0,0,0,6,6,7,4,7,6,0,0,0,0,0,0730 REM SCAN FLAME IMAGE FROM DATA740 FOR Y=0 TO 32 STEP 2:FOR X=0 TO 30 STEP 2750 READ V:IF V=0 THEN HRESET(X,Y):GOTO 780760 C=V+5 'COMPUTE CORRECT COLOR770 HSET(X/2,Y/2,C)780 NEXT X,Y790 REM STORE FLAME IN HBUFFER #1800 HGET (0,0)-(16,16),1810 REM CLEAR SCREEN FOR NEXT OBJECT820 HCLS0830 REM *DRAW AND GET DRADLE840 DATA 0,0,0,0,0,0,0,0,0,0,1,1,0,0,0850 DATA 0,0,0,0,0,0,0,0,0,0,1,1,0,0,0860 DATA 0,0,0,0,0,0,0,0,0,1,1,1,0,0,0870 DATA 0,0,0,0,0,0,0,0,0,1,1,0,0,0,0880 DATA 0,0,0,2,2,0,0,0,1,1,1,0,0,0,0890 DATA 0,0,0,2,2,2,2,0,1,1,0,0,0,0,0900 DATA 0,0,2,2,2,2,2,2,1,2,2,2,0,0,0910 DATA 0,0,2,2,2,2,2,2,2,2,2,2,2,0,0920 DATA 0,0,2,2,2,2,2,2,2,2,2,2,2,0,0930 DATA 0,0,2,2,2,2,2,2,2,2,2,2,2,0,0940 DATA 0,2,2,2,2,2,2,2,2,2,2,2,2,0,0950 DATA 0,2,2,2,2,2,2,2,2,2,2,2,0,0,0960 DATA 0,2,2,2,2,2,2,2,2,2,2,2,0,0,0970 DATA 2,2,2,2,2,2,2,2,2,2,2,2,0,0,0980 DATA 2,2,2,2,2,2,2,2,2,2,2,2,0,0,0990 DATA 2,2,2,2,2,2,2,2,2,2,2,0,0,0,01000 DATA 0,1,2,2,2,1,2,2,2,2,2,0,0,0,01010 DATA 0,0,1,1,1,1,1,2,2,2,0,0,0,0,01020 DATA 0,0,1,1,1,1,1,1,1,1,0,0,0,0,01030 DATA 0,0,0,1,1,1,1,1,1,0,0,0,0,0,01040 DATA 0,0,0,1,1,1,1,0,0,0,0,0,0,0,01050 DATA 0,0,0,0,1,0,0,0,0,0,0,0,0,0,01060 REM SCAN DATA FOR DRADLE TO SCREEN1070 FOR Y=0 TO 21:FOR X=3 TO 171080 READ V1090 IF V=0 THEN GOTO 1110 ELSE IF V=1 THEN C=4 ELSE IF V=2 THEN C=51100 HSET(X,Y,C):HSET(X+40,Y,C):HSET(X+80,Y,C):HSET(X+120,Y,C)1110 NEXT X,Y1120 REM SET UP CORNERS WITH HLINES1130 HCOLOR 41140 REM FRAME 0 CORNER LINES1150 HLINE(6,5)-(4,15),PSET1160 HLINE(7,5)-(4,15),PSET1170 HLINE(15,7)-(11,17),PSET1180 HLINE(15,8)-(12,17),PSET1190 REM FRAME 1 CORNER LINES1200 HLINE(8+40,5)-(5+40,15),PSET1210 HLINE(8+40,6)-(5+40,16),PSET1220 HLINE(9+40,6)-(6+40,16),PSET1230 HLINE(10+40,6)-(7+40,16),PSET1240 REM FRAME 2 CORNER LINES1250 HLINE(10+80,7)-(8+80,16),PSET1260 HLINE(11+80,7)-(9+80,16),PSET1270 HLINE(12+80,6)-(9+80,16),PSET1280 REM FRAME 3 CORNER LINES1290 HLINE(13+120,6)-(10+120,16),PSET1300 HLINE(14+120,6)-(10+120,17),PSET1310 HLINE(14+120,7)-(11+120,17),PSET1320 REM *"GET" DRADLE FRAMES INTO1330 REM  APPROPRIATE HBUFFER AREAS1340 HBUFF 2,2421350 HGET (0,0)-(20,21),2    'FRAME 01360 HBUFF 3,2421370 HGET (40,0)-(60,21),3   'FRAME 11380 HBUFF 4,2421390 HGET (80,0)-(100,21),4  'FRAME 21400 HBUFF 5,2421410 HGET (120,0)-(140,21),5 'FRAME 31420 REM CLEAR SCREEN FOR MAIN SCENE1430 HCLS1440 REM DRAW MENORAH IN COLOR ONE1450 HDRAW "C1;BM55,36;M62,36;M62,48;M69,48;M69,96;M76,96;M76,102;M90,102;M90,108;M132,108;M132,96;M90,96;M90,90;M83,90;M83,36;M90,36;M90,78;M97,78;M97,84;M132,84;M132,78;M111,78;M111,72;M104,72;M104,36;M111,36;M111,60;M118,60;M118,66"1460 HDRAW "M132,66;M132,54;M125,54;M125,36;M132,36;M132,48;M139,48;M139,54;M146,54;M146,30;M160,30;M160,54;M167,54;M167,48;M174,48;M174,36;M181,36;M181,54;M174,54;M174,66;M188,66;M188,60;M195,60;M195,36;M202,36;M202,72;M195,72;M195,78"1470 HDRAW "M174,78;M174,84;M209,84;M209,78;M216,78;M216,36;M223,36;M223,90;M216,90;M216,96;M174,96;M174,108;M216,108;M216,102;M230,102;M230,96;M237,96;M237,48;M244,48;M244,36;M251,36;M251,60;M244,60;M244,108;M237,108;M237,114;M223,114"1480 HDRAW "M223,120;M174,120;M174,138;M167,138;M167,144;M160,144;M160,156;M167,156;M167,168;M174,168;M174,174;M188,174;M188,180;M209,180;M209,186;M216,186;M216,192;M90,192;M90,186;M97,186;M97,180;M118,180;M118,174;M132,174;M132,168;M139,168"1490 HDRAW "M139,156;M146,156;M146,144;M139,144;M139,138;M132,138;M132,120;M83,120;M83,114;M69,114;M69,108;M62,108;M62,60;M55,60;M55,36"1500 REM FILL IN MENORAH OUTLINE1510 HPAINT (153,31),1,11520 HCOLOR 7,0:HPRINT(12,0),"HAPPY HANUKKAH"1530 REM DRAW STAR OF DAVID OUTLINE1540 HDRAW "C6;BM62,132;F42;L84;E42;BM62,186;E42;L84;F42"1550 REM COLOR CENTER WITH COLOR 31560 HPAINT(62,162),3,61570 REM PAINT CORNERS WITH COLOR 21580 HPAINT(62,138),2,61590 HPAINT(85,150),2,61600 HPAINT(85,168),2,61610 HPAINT(35,168),2,61620 HPAINT(35,147),2,61630 HPAINT(62,180),2,61640 REM PLACE SHAMAS AND 1ST FLAME1650 HPUT(147,14)-(163,30),1,PSET1660 HPUT(240,20)-(256,36),1,PSET1670 REM ANIMATE FLAMES AND DRADLE1680 REM SCAN FOR KEYPRESS TO ADD FLAME1690 X1=287:X2=307:DX=-2:DM=6:DB=11700 IF F=0 THEN F=1:PALETTE 10,5:PALETTE 8,39 ELSE IF F=1 THEN F=0:PALETTE 10,39:PALETTE 8,5 'FLICKER THE FLAMES1710 PALETTE 7,RND(63) 'FLASH TEXT1720 IF INKEY$<>"" THEN GOSUB 1870 'ADD DAY IF KEY PRESSED1730 CC=CC+1 'UPDATE CYCLE COUNT FOR DRADLE1740 DB=DB+1:IF DB=6 THEN DB=2 'CALCULATE NEXT DRADLE FRAME BUFFER #1750 X2=X2+DX:X1=X1+DX 'UPDATE DRADLE POSITION (DX=DRADLE SPEED)1760 REM CHECK FOR DRADLE OUT-OF-BOUNDS1770 IF X2>307 THEN X2=307:X1=2871780 IF X1<219 THEN X1=219:X2=2391790 REM DRAW NEW DRADLE POSITION, OLD IMAGE OVERWRITTEN1800 HPUT (X1,171)-(X2,192),DB,PSET1810 IF CC<=DM THEN 1700 'IF STILL MOVING DRADLE, JUMP BACK TO BEGINNING NOW1820 DX=RND(7)-4 'NEW DRADLE SPEED1830 DM=RND(8)+2 'HOW FOR TO GO AT THAT SPEED1840 CC=0 'CLEAR CYCLE COUNT1850 GOTO 17001860 REM ADD A FLAME IN CORRECT ORDER SUBROUTINE1870 HD=HD+11880 ON HD GOSUB 1910,1920,1930,1940,1950,1960,19701890 RETURN1900 REM HPUT STATEMENTS FOR EACH FLAME1910 HPUT(212,20)-(228,36),1,PSET:RETURN 'FLAME FOR DAY 21920 HPUT(193,20)-(209,36),1,PSET:RETURN 'FLAME FOR DAY 31930 HPUT(170,20)-(186,36),1,PSET:RETURN 'FLAME FOR DAY 41940 HPUT(122,20)-(138,36),1,PSET:RETURN 'FLAME FOR DAY 51950 HPUT(101,20)-(117,36),1,PSET:RETURN 'FLAME FOR DAY 61960 HPUT(80,20)-(96,36),1,PSET:RETURN 'FLAME FOR DAY 71970 HPUT(52,20)-(68,36),1,PSET:RETURN 'FLAME FOR DAY 81980 END