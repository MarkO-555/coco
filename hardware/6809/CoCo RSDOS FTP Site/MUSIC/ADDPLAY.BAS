1 '         ADDPLA/BAS2 ' This will add the ML player3 ' routine to Musica files,4 ' whether or not it already5 ' exists.  It won't hurt if6 ' it already has one.  Used7 ' to make Musica files into8 ' stand-alone executable.9 ' By:  Wm. A. Van Nest10 '      76703,46711 CLS:PRINT"This will add the player routineto all '.MUS' files on disk."12 PRINT:PRINT"It will not hurt if any already contain the player."13 PRINT@192,"Is this what you want (Y,N)";14 Z$=INKEY$:IF Z$="" THEN 1415 Z$=CHR$(ASC(Z$)AND95)16 IF Z$="Y" THEN 17 ELSE IF Z$="N" THEN 44 ELSE 1417 GOTO 5618 PRINT@256,"Poking ML data..."19 FOR X=&H3F00 TO &H3FBF:PRINT@273,X;20 READ V$:POKE X,VAL("&H"+V$):NEXT X21 PRINT@256,"Working...        "22 DIM M$(11),D$(68)23 FOR X = 3 TO 1124 DSKI$ 0,17,X,A$,B$25 IF (LEFT$(A$,1)=CHR$(&HFF)) THEN 2826 M$(X)=A$+LEFT$(B$,127)27 NEXT X28 X=X-1:C=029 FOR Y = 3 TO X30 FOR Z = 0 TO 731 IF MID$(M$(Y),Z*32+9,3)<>"MUS" THEN 3632 D$(C)=MID$(M$(Y),Z*32+1,8)33 OK$=LEFT$(D$(C),1)34 IF (OK$=CHR$(0) OR OK$=CHR$(&HFF)) THEN 3635 C=C+136 NEXT Z:NEXT Y37 IF C=0 THEN PRINT@320,"No '.MUS' files on disk!":GOTO 4438 C=C-139 FOR D = 0 TO C:PRINT@384,"Massaging:  ";D$(D)40 LOADM D$(D)+"/MUS"41 GOSUB 4542 SAVEM D$(D)+"/MUS",&H3F00,E,&H3F0043 NEXT D44 PRINT@384,"Done!    ":PRINT:END45 OPEN"D",1,D$(D)+"/MUS",1:FIELD1,1 AS C$:R=146 GET#1,R:IF ASC(C$)=255 THEN 5247 GET#1,R+1:L=256*ASC(C$)48 GET#1,R+2:L=L+ASC(C$)49 GET#1,R+3:A=256*ASC(C$)50 GET#1,R+4:A=A+ASC(C$)51 R=R+L+5:GOTO 4652 GET#1,R+3:E=256*ASC(C$)53 GET#1,R+4:E=E+ASC(C$)54 E=A+L-1:CLOSE #155 RETURN56 PCLEAR1:CLEAR 5000,&H3EFF:GOTO 1857 DATA 20,2,20,E,8E,40,0,EC,84,44,54,ED,81,8C,43,FE,2F,F5,86,3F,1F,8B,B658 DATA FF,1,84,F7,B7,FF,1,B6,FF,3,84,F7,B7,FF,3,86,3C,B7,FF,23,34,1,1A59 DATA 50,8E,44,0,A6,80,B7,3F,CD,EC,81,97,C0,D7,C3,EC,81,97,C6,D7,C9,2060 DATA 16,81,FE,26,10,EC,84,97,C0,D7,C3,EC,2,97,C6,D7,C9,A6,4,97,CD,3061 DATA 8,A6,80,2B,E6,27,4C,97,CC,D6,CD,D7,CE,A6,9F,3F,C0,AB,9F,3F,C3,A962 DATA 9F,3F,C6,A9,9F,3F,C9,B7,FF,20,DC,C1,E3,84,DD,C1,DC,C4,E3,2,DD,C463 DATA DC,C7,E3,4,DD,C7,DC,CA,E3,6,DD,CA,A,CE,26,A,A,CC,27,BF,D6,CD,D764 DATA CE,20,C7,30,84,30,84,B6,0,0,8A,0,81,0,20,BA,4F,1F,8B,8E,40,0,EC65 DATA 84,48,58,ED,81,8C,43,FE,2F,F5,35,81